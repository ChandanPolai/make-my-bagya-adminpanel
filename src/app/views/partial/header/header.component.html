<header [class]="
    'tw-fixed tw-top-0 tw-right-0 tw-h-[77px] tw-backdrop-blur-md tw-bg-white/90 tw-border-b tw-border-gray-200/50 tw-shadow-lg tw-shadow-gray-900/5 tw-z-30 tw-transition-all tw-duration-300 ' +
    (isCollapsed ? 'tw-left-16' : 'tw-left-64')
  ">
  <!-- Gradient overlay -->
  <div
    class="tw-absolute tw-inset-0 tw-bg-gradient-to-r tw-from-white tw-via-gray-50/50 tw-to-white tw-pointer-events-none">
  </div>

  <div class="tw-relative tw-h-full tw-px-6 tw-flex tw-items-center tw-justify-between">
    <!-- Left Section -->
    <div class="tw-flex tw-items-center tw-space-x-6">
      <!-- Enhanced Toggle Sidebar Button -->
      <button (click)="toggleSidebar()"
        class="tw-group tw-p-1 tw-rounded-l tw-transition-all tw-duration-300 tw-transform hover:tw-scale-110 ">
        <i
          class="ph ph-list tw-text-xl tw-text-gray-600 tw-transition-transform tw-duration-300 group-hover:tw-rotate-12"></i>
      </button>
    </div>

    <!-- Right Section -->
    <div class="tw-flex tw-items-center tw-space-x-4">
      <!-- Enhanced Profile Dropdown -->
      <div class="tw-relative">
        <button (click)="toggleProfileDropdown($event)"
          class="tw-flex tw-items-center tw-space-x-3 tw-p-3 tw-rounded-2xl tw-bg-gradient-to-br tw-from-white tw-via-gray-50 tw-to-gray-100 hover:tw-from-gray-50 hover:tw-via-gray-100 hover:tw-to-gray-200 tw-transition-all tw-duration-300 tw-shadow-lg hover:tw-shadow-xl tw-border tw-border-gray-200/50 tw-group tw-backdrop-blur-sm">
          <div class="tw-relative">
            <div
              class="tw-w-12 tw-h-12 tw-bg-gradient-to-br tw-from-blue-400 tw-to-blue-600 tw-rounded-2xl tw-flex tw-items-center tw-justify-center tw-shadow-lg tw-ring-2 tw-ring-white tw-ring-opacity-50 group-hover:tw-ring-opacity-100 tw-transition-all tw-duration-300 tw-transform group-hover:tw-scale-105">
              <img [src]="
                  admin.profilePic
                    ? getImageUrl(admin.profilePic || '')
                    : 'https://ui-avatars.com/api/?name=' +
                      admin.name +
                      '&background=random&color=fff&bold=true'
                " [alt]="admin.name"
                class="tw-h-12 tw-w-12 tw-rounded-2xl tw-object-cover tw-border-2 tw-border-white tw-shadow-sm" />
            </div>
            <!-- Online status indicator -->
            <div
              class="tw-absolute -tw-bottom-0.5 -tw-right-0.5 tw-w-4 tw-h-4 tw-bg-gradient-to-r tw-from-green-400 tw-to-green-500 tw-rounded-full tw-border-2 tw-border-white tw-shadow-sm tw-animate-pulse">
            </div>
          </div>

          <div class="tw-hidden md:tw-block tw-text-left">
            <span class="tw-text-sm tw-font-bold tw-text-gray-800 tw-block tw-leading-tight" *ngIf="admin">{{ admin.name
              | titlecase}}</span>
            <span
              class="tw-text-xs tw-text-gray-500 tw-font-semibold tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-bg-clip-text tw-text-transparent">Administrator</span>
          </div>

          <div class="tw-flex tw-flex-col tw-items-center tw-space-y-1">
            <i
              class="ph-caret-down tw-text-xs tw-text-gray-400 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180 group-hover:tw-scale-110"></i>
            <div class="tw-w-1 tw-h-1 tw-bg-gray-300 tw-rounded-full tw-opacity-50"></div>
          </div>
        </button>

        <!-- Enhanced Profile Dropdown Menu -->
        <div *ngIf="showProfileDropdown"
          class="tw-absolute tw-right-0 tw-mt-3 tw-w-72 tw-bg-white tw-rounded-3xl tw-shadow-2xl tw-border tw-border-gray-100 tw-backdrop-blur-md tw-z-50 tw-transform tw-transition-all tw-duration-300 tw-origin-top-right tw-overflow-hidden">
          <div [class]="
              'tw-px-6 tw-py-5 tw-bg-gradient-to-br tw-from-gray-50 tw-via-white tw-to-gray-50 tw-border-b tw-border-gray-100 ' +
              currentTheme.secondary
            ">
            <div class="tw-flex tw-items-center tw-space-x-4">
              <div class="tw-relative">
                <div
                  class="tw-w-10 tw-h-10 tw-bg-gradient-to-br tw-from-blue-500 tw-to-purple-600 tw-rounded-2xl tw-flex tw-items-center tw-justify-center tw-shadow-lg tw-ring-2 tw-ring-white">
                  <img [src]="
                      admin.profilePic
                        ? getImageUrl(admin.profilePic || '')
                        : 'https://ui-avatars.com/api/?name=' +
                          admin.name +
                          '&background=random&color=fff&bold=true'
                    " [alt]="admin.name"
                    class="tw-h-10 tw-w-10 tw-rounded-2xl tw-object-cover tw-border-2 tw-border-white" />
                </div>
                <div
                  class="tw-absolute -tw-bottom-1 -tw-right-1 tw-w-5 tw-h-5 tw-bg-gradient-to-r tw-from-green-400 tw-to-green-500 tw-rounded-full tw-border-2 tw-border-white tw-shadow-sm">
                </div>
              </div>
              <div class="tw-flex-1">
                <p class="tw-text-[15px] tw-font-bold tw-text-gray-900 tw-leading-tight tw-mb-1">
                  {{ admin.name | titlecase }}
                </p>
                <p class="tw-text-[13px] tw-text-gray-600 tw-font-medium tw-mb-1">
                  {{ admin.email }}
                </p>
              </div>
            </div>
          </div>

          <!-- Menu Items with enhanced styling -->
          <div class="">
            <a routerLink="settings/user-profile" routerLinkActive="active-link"
              [routerLinkActiveOptions]="{ exact: true }" (click)="toggleProfileDropdown($event); $event.stopPropagation()" [ngClass]="[
                'tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-gray-700 tw-transition-all tw-duration-200 tw-group tw-relative tw-overflow-hidden',
                'hover:' + currentTheme.secondary + ' hover:tw-transform hover:tw-translate-x-1'
              ]">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-blue-500 tw-to-purple-600 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 group-hover:tw-from-blue-200 group-hover:tw-to-blue-300 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-user tw-text-blue-600 tw-text-lg"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-text-gray-900 tw-block">Your Profile</span>
                <span class="tw-text-xs tw-text-gray-500">Manage your account</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-gray-400 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>

            <a routerLink="settings/change-password" routerLinkActive="active-link"
              [routerLinkActiveOptions]="{ exact: true }" (click)="toggleProfileDropdown($event); $event.stopPropagation()" [ngClass]="[
                'tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-gray-700 tw-transition-all tw-duration-200 tw-group tw-relative tw-overflow-hidden',
                'hover:' + currentTheme.secondary + ' hover:tw-transform hover:tw-translate-x-1'
              ]">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-purple-500 tw-to-pink-600 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 group-hover:tw-from-purple-200 group-hover:tw-to-purple-300 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-lock tw-text-purple-600 tw-text-lg"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-text-gray-900 tw-block">Change Password</span>
                <span class="tw-text-xs tw-text-gray-500">Update your password</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-gray-400 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>
          </div>

          <!-- Divider with gradient -->
          <div class="tw-mx-6 tw-h-px tw-bg-gradient-to-r tw-from-transparent tw-via-gray-200 tw-to-transparent"></div>

          <!-- Enhanced Logout Button -->
          <div class="">
            <a (click)="_logoutUser(); toggleProfileDropdown($event); $event.stopPropagation()"
              class="tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-red-600 hover:tw-bg-gradient-to-r hover:tw-from-red-50 hover:tw-to-red-100 hover:tw-text-red-700 tw-transition-all tw-duration-200 tw-group tw-cursor-pointer tw-relative tw-overflow-hidden hover:tw-transform hover:tw-translate-x-1">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-red-500 tw-to-red-600 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 group-hover:tw-from-red-200 group-hover:tw-to-red-300 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-sign-out tw-text-red-600 tw-text-lg"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-block">Sign Out</span>
                <span class="tw-text-xs tw-text-red-500">End your session</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-red-400 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>